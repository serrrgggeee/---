<!DOCTYPE html>
<html lang="en">
<head>
	<!-- Yandex.Metrika counter -->
	<script type="text/javascript" >
		(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
		m[i].l=1*new Date();
		for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
		k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
		(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");
	
		ym(97255908, "init", {
			clickmap:true,
			trackLinks:true,
			accurateTrackBounce:true
		});
	</script>
	<noscript><div><img src="https://mc.yandex.ru/watch/97255908" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
	<!-- /Yandex.Metrika counter -->
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<html-head></html-head>
	<app-head></app-head>
	
</head>
<body>
	<nav class="top-navbar navbar navbar-default green_back" role="navigation">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
			<span class="sr-only">Toggle navigation</span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			</button>
		</div>
		<app-navbar-collapse></app-navbar-collapse>
	</nav>
	
	<div class="container-fluid" xmlns="https://www.w3.org/1999/html">
		<div class="row main">
			<app-block-content></app-block-content>
		</div>
	</div>
</body>
<script type="text/javascript">
	const static_dot = window.location.pathname.includes('index.html')? ".": "";
	const scripts = [
		`${static_dot}/static/js/bootstrap.js`,
		`${static_dot}/static/js/gallery.js`,
		`${static_dot}/top_menu.js`,
		`${static_dot}/place.js`,
		`${static_dot}/places.js`,
		`${static_dot}/left_side.js`,
		`${static_dot}/page_not_found.js`,
		`${static_dot}/block_content.js`,
		`${static_dot}/place_right_side.js`,
		// `https://vk.com/js/api/share.js?90" charset="windows-1251"`
		`${static_dot}/static/js/soc.js`,
		`${static_dot}/static/js/main.js`,
		`${static_dot}/static/js/jquery.reel.js`,
		`${static_dot}/main.js`,
		`${static_dot}/book.js`,
		`${static_dot}/sitemap.js`,
	];
	const scripts_on_load = [
		`${static_dot}/index.js`,
	];

	addStyle(`${static_dot}/static/css/bootstrap.css`)
	addStyle(`${static_dot}/static/bootstrap_slider/css/bootstrap_slider.css`)
	addStyle(`${static_dot}/static/css/main/main.css`)
	addScript(`${static_dot}/.env.js`);	
	addScript(`${static_dot}/conf.js`);	
	addScript(`${static_dot}/data.js`);	
	addScript(`${static_dot}/static/js/jquery-1.11.1.min.js`);	
	addScript(`${static_dot}/header.js`);	
	
	function addScript( src ) {
		var s = document.createElement( 'script' );
		s.setAttribute( 'src', src );
		s.setAttribute( 'charset', 'utf-8' );
		document.body.appendChild( s );
	}

	function addStyle(href) {
		const element = document.createElement("link");
		element.setAttribute("rel", "stylesheet");
		element.setAttribute("type", "text/css");
		element.setAttribute("href", href);
		document.getElementsByTagName("head")[0].appendChild(element);
	}

	function load_router() {
		setTimeout(() => {
			try{
				window.ROUNTERS = {
					'^\/(\\d{1,})\/$': {'method': place_ready, 'file': 1, 'data': 'places'},
					'^\/book\/(\\d{1,})\/$': {'method': book_ready, 'file': 'book_data', 'data': 'book_result'},
					'^(/\)$': {'method': main_ready, 'file': 'data', 'data': 'result'}
				}
			}catch{
				load_router();
			}

		}, 0);
	}
	
	load_router();
	
	function load_header() {
		setTimeout(() => {
			if(customElements.get('html-head') === undefined || !window['$']) {
				load_header();
			}else {
				scripts.forEach(item=> {
						addScript(item);
				})
			}

		}, 0);
	}
	
	load_header();

	function load_index() {
		setTimeout(() => {
			if(customElements.get('html-head') === undefined || !window.ROUNTERS) {
				load_index();
			}else {
				scripts_on_load.forEach(item=> {
						addScript(item);
					})
				}

		}, 0);
	}
	
	window.addEventListener("load", function(){
		load_index();
	});

</script>

</html>
